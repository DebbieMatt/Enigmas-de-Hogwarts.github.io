<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enigmas de Hogwarts</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Crimson+Text:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Crimson Text', serif;
            background: linear-gradient(135deg, #1e293b 0%, #581c87 50%, #1e3a8a 100%);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }

        /* Part√≠culas m√°gicas */
        .magic-particle {
            position: fixed;
            width: 4px;
            height: 4px;
            background: #fbbf24;
            border-radius: 50%;
            opacity: 0;
            animation: float 4s infinite;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes float {
            0%, 100% { 
                transform: translateY(0) translateX(0); 
                opacity: 0; 
            }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { 
                transform: translateY(-100vh) translateX(50px); 
                opacity: 0; 
            }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
        }

        /* Tela inicial */
        .start-screen {
            text-align: center;
        }

        .title-box {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid #ca8a04;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .main-title {
            font-family: 'Cinzel', serif;
            font-size: 3em;
            color: #eab308;
            text-shadow: 0 0 20px rgba(234, 179, 8, 0.8);
            margin-bottom: 10px;
        }

        .subtitle {
            color: #c084fc;
            font-size: 1.5em;
            font-style: italic;
        }

        .intro-box {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.9) 0%, rgba(88, 28, 135, 0.9) 100%);
            border: 2px solid #ca8a04;
            border-radius: 25px;
            padding: 40px;
            backdrop-filter: blur(10px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
        }

        .intro-title {
            font-family: 'Cinzel', serif;
            font-size: 2em;
            color: #eab308;
            margin-bottom: 25px;
        }

        .intro-text {
            color: #cbd5e1;
            font-size: 1.2em;
            line-height: 1.8;
            margin-bottom: 25px;
            text-align: justify;
            text-indent: 2em;
        }

        .rules-box {
            background: rgba(120, 53, 15, 0.3);
            border-left: 4px solid #eab308;
            border-radius: 0 10px 10px 0;
            padding: 20px;
            margin: 25px 0;
        }

        .rules-title {
            color: #fcd34d;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .rules-list {
            color: #cbd5e1;
            list-style: none;
            margin-left: 20px;
        }

        .rules-list li {
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .start-button {
            width: 100%;
            background: linear-gradient(to right, #dc2626, #b91c1c);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 50px;
            font-family: 'Cinzel', serif;
            font-size: 1.3em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 30px;
            animation: pulse 2s infinite;
            box-shadow: 0 10px 30px rgba(220, 38, 38, 0.5);
            transition: transform 0.2s;
        }

        .start-button:hover {
            transform: scale(1.05);
        }

        /* Tela de jogo */
        .game-screen {
            display: none;
        }

        .game-header {
            text-align: center;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid #ca8a04;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .game-title {
            font-family: 'Cinzel', serif;
            font-size: 2.5em;
            color: #eab308;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .info-card {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(202, 138, 4, 0.5);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .info-label {
            color: #94a3b8;
            font-size: 0.9em;
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        .info-value {
            color: #fbbf24;
            font-size: 2em;
            font-weight: bold;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(202, 138, 4, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 25px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #fbbf24, #ca8a04);
            transition: width 0.5s;
            box-shadow: 0 0 10px #ffd700;
        }

        .game-card {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.9) 0%, rgba(88, 28, 135, 0.9) 100%);
            border: 2px solid #ca8a04;
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .rotating-glow {
            position: absolute;
            inset: 0;
            opacity: 0.1;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.3) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
            pointer-events: none;
        }

        .level-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .level-title {
            font-family: 'Cinzel', serif;
            font-size: 2em;
            color: #eab308;
        }

        .difficulty-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid currentColor;
        }

        .question-box {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(202, 138, 4, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            position: relative;
            z-index: 1;
        }

        .description {
            color: #cbd5e1;
            font-size: 1.2em;
            line-height: 1.8;
            margin-bottom: 20px;
            text-align: justify;
            text-indent: 2em;
        }

        .question {
            color: #fcd34d;
            font-size: 1.2em;
            font-weight: 600;
        }

        .hint-box {
            background: rgba(120, 53, 15, 0.4);
            border-left: 4px solid #eab308;
            border-radius: 0 10px 10px 0;
            padding: 20px;
            margin-bottom: 25px;
            display: none;
            position: relative;
            z-index: 1;
        }

        .hint-title {
            color: #fcd34d;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .hint-text {
            color: #cbd5e1;
            font-size: 1.1em;
        }

        .answer-input {
            width: 100%;
            padding: 15px 20px;
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(202, 138, 4, 0.5);
            color: white;
            font-family: 'Crimson Text', serif;
            font-size: 1.2em;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .answer-input:focus {
            outline: none;
            border-color: #eab308;
            box-shadow: 0 0 0 3px rgba(234, 179, 8, 0.3);
        }

        .answer-input::placeholder {
            color: #94a3b8;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .game-button {
            padding: 15px 25px;
            border: none;
            border-radius: 10px;
            font-family: 'Cinzel', serif;
            font-weight: 600;
            font-size: 1em;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .game-button:hover:not(:disabled) {
            transform: scale(1.05);
        }

        .game-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .hint-button {
            background: linear-gradient(to right, #2563eb, #0e7490);
            color: white;
        }

        .check-button {
            background: linear-gradient(to right, #d97706, #c2410c);
            color: white;
            box-shadow: 0 5px 20px rgba(217, 119, 6, 0.4);
        }

        .feedback-box {
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            font-weight: bold;
            font-size: 1.2em;
            border: 2px solid;
            display: none;
        }

        .feedback-correct {
            background: rgba(22, 101, 52, 0.4);
            border-color: #4ade80;
            color: #86efac;
        }

        .feedback-incorrect {
            background: rgba(127, 29, 29, 0.4);
            border-color: #f87171;
            color: #fca5a5;
        }

        /* Tela final */
        .complete-screen {
            display: none;
            text-align: center;
        }

        .complete-card {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.9) 0%, rgba(88, 28, 135, 0.9) 100%);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 60px;
            border: 2px solid #ca8a04;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
        }

        .trophy {
            font-size: 6em;
            animation: bounce 2s infinite;
            margin-bottom: 20px;
        }

        .complete-title {
            font-family: 'Cinzel', serif;
            font-size: 3em;
            color: #eab308;
            text-shadow: 0 0 30px rgba(234, 179, 8, 0.8);
            margin-bottom: 20px;
        }

        .stars {
            font-size: 4em;
            margin-bottom: 25px;
        }

        .score-box {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid #ca8a04;
        }

        .final-score {
            font-size: 3.5em;
            font-weight: bold;
            color: #fcd34d;
            text-shadow: 0 0 30px rgba(253, 224, 71, 0.8);
        }

        .score-detail {
            color: #cbd5e1;
            margin-top: 10px;
            font-size: 1.2em;
        }

        .final-message {
            font-size: 1.8em;
            color: #c084fc;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .restart-button {
            background: linear-gradient(to right, #a855f7, #ec4899);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 50px;
            font-family: 'Cinzel', serif;
            font-size: 1.3em;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(168, 85, 247, 0.4);
            transition: transform 0.2s;
        }

        .restart-button:hover {
            transform: scale(1.05);
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            color: #94a3b8;
            font-size: 0.9em;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .main-title {
                font-size: 2em;
            }

            .info-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 10px;
            }

            .button-grid {
                grid-template-columns: 1fr;
            }

            .game-card {
                padding: 25px;
            }

            .complete-card {
                padding: 40px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Part√≠culas m√°gicas -->
    <div id="particles"></div>

    <div class="container">
        <!-- Tela Inicial -->
        <div id="startScreen" class="start-screen">
            <div class="title-box">
                <h1 class="main-title">‚ö° Enigmas de Hogwarts ‚ö°</h1>
                <p class="subtitle">O Desafio dos Marotos</p>
            </div>

            <div class="intro-box">
                <h2 class="intro-title">Bem-vindo(a), Bruxo(a)!</h2>
                
                <p class="intro-text">
                    Voc√™ encontrou o Mapa do Maroto e descobriu um desafio secreto deixado por 
                    Tiago Potter, Sirius Black, Remo Lupin e Pedro Pettigrew.
                </p>
                
                <p class="intro-text">
                    Para provar que √© digno de conhecer os segredos de Hogwarts, voc√™ precisar√° 
                    decifrar <strong>10 enigmas progressivos</strong> relacionados a 
                    <strong>siglas conectadas</strong> e caracter√≠sticas do mundo m√°gico.
                </p>
                
                <div class="rules-box">
                    <p class="rules-title">üìú Regras do Desafio:</p>
                    <ul class="rules-list">
                        <li>‚Ä¢ Cada n√≠vel tem <strong>3 tentativas</strong></li>
                        <li>‚Ä¢ Pontos variam de <strong>100 a 300</strong> por n√≠vel</li>
                        <li>‚Ä¢ Dicas custam <strong>-10 pontos</strong></li>
                        <li>‚Ä¢ Dificuldade aumenta progressivamente</li>
                        <li>‚Ä¢ Desafio completo: <strong>1.850 pontos poss√≠veis</strong></li>
                    </ul>
                </div>
                
                <p class="intro-text" style="text-align: center; text-indent: 0; font-style: italic;">
                    Use as dicas se necess√°rio, mas elas custar√£o parte de sua pontua√ß√£o!
                </p>

                <button class="start-button" onclick="startGame()">
                    üéÆ Iniciar Desafio
                </button>
            </div>
        </div>

        <!-- Tela de Jogo -->
        <div id="gameScreen" class="game-screen">
            <div class="game-header">
                <h1 class="game-title">‚ö° Enigmas de Hogwarts ‚ö°</h1>
            </div>

            <div class="info-grid">
                <div class="info-card">
                    <div class="info-label">Fase</div>
                    <div class="info-value" id="levelDisplay">1/10</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Pontua√ß√£o</div>
                    <div class="info-value" id="scoreDisplay">0</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Tentativas</div>
                    <div class="info-value" id="attemptsDisplay">3</div>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>

            <div class="game-card">
                <div class="rotating-glow"></div>
                
                <div class="level-header">
                    <h2 class="level-title" id="levelTitle">N√≠vel 1:</h2>
                    <span class="difficulty-badge" id="difficultyBadge">F√°cil</span>
                </div>

                <div class="question-box">
                    <p class="description" id="description"></p>
                    <p class="question" id="question"></p>
                </div>

                <div class="hint-box" id="hintBox">
                    <p class="hint-title">üí° Dica:</p>
                    <p class="hint-text" id="hintText"></p>
                </div>

                <input 
                    type="text" 
                    class="answer-input" 
                    id="answerInput" 
                    placeholder="Digite sua resposta aqui..."
                    onkeypress="if(event.key === 'Enter') checkAnswer()"
                >

                <div class="button-grid">
                    <button class="game-button hint-button" id="hintButton" onclick="showHint()">
                        üß† Pedir Dica (-10)
                    </button>
                    <button class="game-button check-button" onclick="checkAnswer()">
                        ‚ú® Verificar Resposta
                    </button>
                </div>

                <div class="feedback-box" id="feedbackBox"></div>
            </div>
        </div>

        <!-- Tela de Conclus√£o -->
        <div id="completeScreen" class="complete-screen">
            <div class="complete-card">
                <div class="trophy">üèÜ</div>
                <h1 class="complete-title">üéâ Desafio Conclu√≠do! üéâ</h1>
                
                <div class="stars" id="starsDisplay"></div>
                
                <div class="score-box">
                    <p class="final-score" id="finalScore">0 pontos</p>
                    <p class="score-detail" id="scoreDetail"></p>
                </div>
                
                <p class="final-message" id="finalMessage"></p>
                
                <button class="restart-button" onclick="restartGame()">
                    üîÑ Jogar Novamente
                </button>
            </div>
        </div>

        <div class="footer">
            <p>‚ú® Criado por Debbie Matt - Inspirado no universo de Harry Potter ‚ú®</p>
            <p>Copyright ¬© 2022-2025</p>
        </div>
    </div>

    <script>
        // Estado do jogo
        let currentLevel = 0;
        let score = 0;
        let attempts = 3;
        let hintUsed = false;

        // N√≠veis do jogo
        const levels = [
            {
                id: 0,
                difficulty: "F√°cil",
                title: "N√≠vel 1:",
                description: "Quatro amigos deixaram suas marcas em Hogwarts. Suas iniciais s√£o: T.P., S.B., R.L. e P.P.",
                question: "Juntos, eles criaram um artefato m√°gico famoso. Como esse grupo ficou conhecido?",
                answers: ["marotos", "os marotos", "maroto"],
                hint: "Pense no apelido que eles usavam e que est√° relacionado ao mapa que criaram.",
                points: 100
            },
            {
                id: 1,
                difficulty: "F√°cil",
                title: "N√≠vel 2:",
                description: "√â um pr√™mio outorgado a bruxos e bruxas por grandes feitos. Possui tr√™s classes: medalha dourada em fita verde (Primeira Classe), roxa (Segunda Classe) ou branca (Terceira Classe).",
                question: "Que ordem √© essa? (Responda com as iniciais ou nome completo)",
                answers: ["om", "o.m.", "o.m", "ordem de merlin"],
                hint: "O fundador desta ordem foi o bruxo mais famoso de todos os tempos, que d√° nome √† pr√≥pria ordem.",
                points: 100
            },
            {
                id: 2,
                difficulty: "M√©dio",
                title: "N√≠vel 3:",
                description: "Observe as siglas conectadas: H.G., R.W., H.P. - Todos estudaram juntos em Hogwarts e formaram um trio insepar√°vel.",
                question: "Durante a luta contra as for√ßas das trevas, como esse trio ficou conhecido?",
                answers: ["trio de ouro", "o trio de ouro", "trio dourado", "o trio dourado"],
                hint: "Hermione Granger, Ronald Weasley e Harry Potter formam o...",
                points: 150
            },
            {
                id: 3,
                difficulty: "M√©dio",
                title: "N√≠vel 4:",
                description: "Decifre a sigla do feiti√ßo: 'E.P.' - √â um dos feiti√ßos mais poderosos de prote√ß√£o, invocado atrav√©s de mem√≥rias felizes.",
                question: "Cria uma forma et√©rea prateada que representa o bruxo. Qual √© o nome completo deste feiti√ßo?",
                answers: ["expecto patronum", "expectro patronum"],
                hint: "Este feiti√ßo √© usado para afastar Dementadores e come√ßa com 'Expecto...'",
                points: 150
            },
            {
                id: 4,
                difficulty: "M√©dio",
                title: "N√≠vel 5:",
                description: "Siglas de lugares conectados: B.A. (local de bebidas), S.C. (local de doces), Z.Z. (loja de piadas).",
                question: "Esses tr√™s estabelecimentos ficam em qual vilarejo m√°gico?",
                answers: ["h", "hogsmeade"],
                hint: "√â o √∫nico vilarejo inteiramente habitado por bruxos na Gr√£-Bretanha, localizado perto de Hogwarts.",
                points: 150
            },
            {
                id: 5,
                difficulty: "Dif√≠cil",
                title: "N√≠vel 6:",
                description: "Decodifique a frase em siglas: '√â,u,p,o,a,b,e,b,q,r,g,f. A,O,i,u,l,m,d,e,u,f,v'",
                question: "Esta frase descreve algo importante sobre a Ordem de Merlin. Decodifique completamente.",
                answers: ["√© um pr√™mio outorgado a bruxos e bruxas que realizaram grandes feitos a ordem inclui uma linda medalha dourada em uma fita verde"],
                hint: "Cada letra representa a inicial de uma palavra. Lembre-se: v√≠rgulas separam palavras comuns, pontos finais separam nomes pr√≥prios.",
                points: 200
            },
            {
                id: 6,
                difficulty: "Dif√≠cil",
                title: "N√≠vel 7:",
                description: "Siglas conectadas de seguidores das trevas: B.L. Jr., L.M., B.L., P.P.",
                question: "Estes quatro foram Comensais da Morte. Complete: B.L. Jr. = Bartolomeu... (sobrenome completo)",
                answers: ["crouch", "bartolomeu crouch", "crouch jr", "bartolomeu crouch jr"],
                hint: "Ele era filho de um importante funcion√°rio do Minist√©rio da Magia e se disfar√ßou em Hogwarts.",
                points: 200
            },
            {
                id: 7,
                difficulty: "Muito Dif√≠cil",
                title: "N√≠vel 8:",
                description: "F(es): G.G., H.H., R.R., S.S. - Quatro bruxos poderosos fundaram Hogwarts h√° mil anos.",
                question: "Decodifique TODOS os nomes completos separados por v√≠rgula (ordem alfab√©tica por primeiro nome)",
                answers: ["godrico gryffindor, helga hufflepuff, rowena ravenclaw, salazar slytherin"],
                hint: "Cada um deu origem a uma casa: a do le√£o, do texugo, da √°guia e da serpente.",
                points: 250
            },
            {
                id: 8,
                difficulty: "Muito Dif√≠cil",
                title: "N√≠vel 9:",
                description: "T.R. criou 7 fragmentos de sua alma: D.V., A.P., M.G., T.S., D.R., C.H., H.P.",
                question: "Decodifique 'D.V.' - o primeiro horcrux criado (objeto completo)",
                answers: ["di√°rio de tom riddle", "diario de tom riddle"],
                hint: "Era um objeto escolar que pertenceu ao pr√≥prio T.R. quando estudante. Foi destru√≠do por Harry com uma presa de basilisco.",
                points: 250
            },
            {
                id: 9,
                difficulty: "Extremo",
                title: "N√≠vel 10:",
                description: "Decodifique a profecia complexa: 'O,√∫,c,c,d,p,p,d,D,T,s,a,q,f,d,n,m,d,J,e,a,s,d,o,a,p,d,u,o,D,T'",
                question: "Esta √© uma das profecias mais importantes. Decodifique as primeiras 10 palavras.",
                answers: ["o √∫nico com capacidade de derrotar o dark lord se aproximar√° quando fizer"],
                hint: "A profecia que mudou o destino de Harry Potter. Come√ßa com 'O √∫nico com...'",
                points: 300
            }
        ];

        // Criar part√≠culas m√°gicas
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'magic-particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 4 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                container.appendChild(particle);
            }
        }

        // Normalizar resposta
        function normalizeAnswer(text) {
            return text
                .toLowerCase()
                .trim()
                .normalize('NFD')
                .replace(/[\u0300-\u036f]/g, '')
                .replace(/[.,;:!?]/g, '')
                .replace(/\s+/g, ' ');
        }

        // Obter cor da dificuldade
        function getDifficultyColor(difficulty) {
            const colors = {
                "F√°cil": "#4ade80",
                "M√©dio": "#fbbf24",
                "Dif√≠cil": "#fb923c",
                "Muito Dif√≠cil": "#f87171",
                "Extremo": "#c084fc"
            };
            return colors[difficulty] || "#ffffff";
        }

        // Iniciar jogo
        function startGame() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            loadLevel();
        }

        // Carregar n√≠vel
        function loadLevel() {
            const level = levels[currentLevel];
            
            document.getElementById('levelDisplay').textContent = `${currentLevel + 1}/10`;
            document.getElementById('scoreDisplay').textContent = score;
            document.getElementById('attemptsDisplay').textContent = attempts;
            document.getElementById('levelTitle').textContent = level.title;
            document.getElementById('difficultyBadge').textContent = level.difficulty;
            document.getElementById('difficultyBadge').style.color = getDifficultyColor(level.difficulty);
            document.getElementById('description').textContent = level.description;
            document.getElementById('question').textContent = '‚ùì ' + level.question;
            document.getElementById('hintText').textContent = level.hint;
            
            const progress = (currentLevel / levels.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            document.getElementById('answerInput').value = '';
            document.getElementById('hintBox').style.display = 'none';
            document.getElementById('feedbackBox').style.display = 'none';
            document.getElementById('hintButton').disabled = false;
            hintUsed = false;
        }

        // Mostrar dica
        function showHint() {
            if (!hintUsed) {
                document.getElementById('hintBox').style.display = 'block';
                document.getElementById('hintButton').disabled = true;
                document.getElementById('hintButton').textContent = 'Dica Usada';
                hintUsed = true;
                score = Math.max(0, score - 10);
                document.getElementById('scoreDisplay').textContent = score;
            }
        }

        // Verificar resposta
        function checkAnswer() {
            const answer = document.getElementById('answerInput').value;
            const feedbackBox = document.getElementById('feedbackBox');
            
            if (!answer.trim()) {
                feedbackBox.className = 'feedback-box feedback-incorrect';
                feedbackBox.textContent = '‚ö†Ô∏è Por favor, digite uma resposta!';
                feedbackBox.style.display = 'block';
                return;
            }

            const level = levels[currentLevel];
            const normalized = normalizeAnswer(answer);
            const isCorrect = level.answers.some(ans => {
                const normalizedAns = normalizeAnswer(ans);
                return normalized === normalizedAns || normalized.includes(normalizedAns);
            });

            if (isCorrect) {
                score += level.points;
                document.getElementById('scoreDisplay').textContent = score;
                
                feedbackBox.className = 'feedback-box feedback-correct';
                feedbackBox.textContent = `‚ú® Correto! Excelente trabalho, bruxo(a)! +${level.points} pontos ‚ú®`;
                feedbackBox.style.display = 'block';

                setTimeout(() => {
                    if (currentLevel < levels.length - 1) {
                        currentLevel++;
                        attempts = 3;
                        loadLevel();
                    } else {
                        showCompleteScreen();
                    }
                }, 2000);
            } else {
                attempts--;
                document.getElementById('attemptsDisplay').textContent = attempts;

                if (attempts > 0) {
                    feedbackBox.className = 'feedback-box feedback-incorrect';
                    feedbackBox.textContent = `‚ùå Resposta incorreta! Voc√™ tem mais ${attempts} tentativa(s).`;
                    feedbackBox.style.display = 'block';
                } else {
                    feedbackBox.className = 'feedback-box feedback-incorrect';
                    feedbackBox.textContent = `‚ùå Suas tentativas acabaram! A resposta era: ${level.answers[0]}`;
                    feedbackBox.style.display = 'block';
                    
                    setTimeout(() => {
                        if (currentLevel < levels.length - 1) {
                            currentLevel++;
                            attempts = 3;
                            loadLevel();
                        } else {
                            showCompleteScreen();
                        }
                    }, 3000);
                }
            }
        }

        // Mostrar tela de conclus√£o
        function showCompleteScreen() {
            document.getElementById('gameScreen').style.display = 'none';
            document.getElementById('completeScreen').style.display = 'block';

            const maxScore = levels.reduce((sum, l) => sum + l.points, 0);
            const percentage = (score / maxScore) * 100;
            
            let stars = '';
            let message = '';
            let starColor = '';
            
            if (percentage >= 90) {
                stars = '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê';
                message = 'Extraordin√°rio! Voc√™ √© digno do t√≠tulo de Maroto Honor√°rio!';
                starColor = '#fbbf24';
            } else if (percentage >= 70) {
                stars = '‚≠ê‚≠ê‚≠ê‚≠ê';
                message = 'Excelente! Os Marotos ficariam orgulhosos de voc√™!';
                starColor = '#fcd34d';
            } else if (percentage >= 50) {
                stars = '‚≠ê‚≠ê‚≠ê';
                message = 'Bom trabalho! Continue praticando suas habilidades m√°gicas!';
                starColor = '#60a5fa';
            } else if (percentage >= 30) {
                stars = '‚≠ê‚≠ê';
                message = 'Voc√™ precisa estudar mais sobre o mundo m√°gico!';
                starColor = '#94a3b8';
            } else {
                stars = '‚≠ê';
                message = 'Talvez seja hora de revisar seus conhecimentos em Hogwarts!';
                starColor = '#6b7280';
            }

            document.getElementById('starsDisplay').textContent = stars;
            document.getElementById('starsDisplay').style.color = starColor;
            document.getElementById('finalScore').textContent = `${score} pontos`;
            document.getElementById('scoreDetail').textContent = `de ${maxScore} poss√≠veis (${percentage.toFixed(1)}%)`;
            document.getElementById('finalMessage').textContent = message;
        }

        // Reiniciar jogo
        function restartGame() {
            currentLevel = 0;
            score = 0;
            attempts = 3;
            hintUsed = false;
            
            document.getElementById('completeScreen').style.display = 'none';
            document.getElementById('startScreen').style.display = 'block';
        }

        // Inicializar ao carregar a p√°gina
        window.onload = function() {
            createParticles();
        };
    </script>
</body>
</html>
